# Baltic DNS - Инструкции по настройке DNS

## Автоматическая установка через mobileconfig (рекомендуется)

### Для iPhone/iPad (iOS 14+)
1. Скачайте файл `BalticDNS.mobileconfig` на устройство
2. Откройте файл (через Safari, Mail или AirDrop)
3. Нажмите "Установить" в верхнем правом углу
4. Введите пароль устройства если потребуется
5. Нажмите "Установить" еще раз для подтверждения
6. Перейдите в Настройки > Основные > VPN и управление устройством > Профили
7. Убедитесь что профиль "Baltic DNS - Secure DNS Configuration" активен

### Для Mac (macOS 10.15+)
1. Скачайте файл `BalticDNS.mobileconfig`
2. Откройте файл двойным кликом
3. Откроется окно Системных настроек в разделе "Профили"
4. Нажмите "Установить..."
5. Введите пароль администратора
6. Нажмите "Установить" для подтверждения
7. Профиль появится в списке установленных

## Проверка работы DNS

### Тест в Safari/браузере
```
Откройте: https://1.1.1.1/help
Проверьте что DNS резолвер показывает: 185.237.95.211
```

### Тест в Терминале (macOS)
```bash
# Проверка обычного DNS
nslookup google.com 185.237.95.211

# Проверка DoH
curl -H "accept: application/dns-json" \
  "https://dns.uzicus.ru/dns-query?name=google.com&type=A"
```

## Ручная настройка DNS (альтернатива)

### iPhone/iPad
1. Настройки > Wi-Fi
2. Нажмите (i) рядом с подключенной сетью
3. Настроить DNS > Вручную
4. Удалите существующие DNS серверы
5. Добавьте: `185.237.95.211`
6. Сохраните настройки

### Mac
1. Системные настройки > Сеть
2. Выберите активное подключение > Дополнительно...
3. Вкладка DNS
4. Нажмите + и добавьте: `185.237.95.211`
5. Переместите его в начало списка
6. OK > Применить

## Используемые DNS протоколы

| Протокол | Адрес | Порт | Шифрование |
|----------|-------|------|------------|
| DNS-over-HTTPS (DoH) | dns.uzicus.ru/dns-query | 443 | ✅ HTTPS |
| DNS-over-TLS (DoT) | dns.uzicus.ru | 853 | ✅ TLS |
| Обычный DNS | 185.237.95.211 | 53 | ❌ Нет |

## Приоритет протоколов
mobileconfig настроен в следующем порядке приоритетов:
1. **DNS-over-HTTPS** (основной) - максимальная безопасность
2. **DNS-over-TLS** (резервный) - высокая безопасность  
3. **Обычный DNS** (fallback) - совместимость

## Резервные DNS серверы
В случае недоступности Baltic DNS используются:
- Cloudflare: 1.1.1.1
- Google: 8.8.8.8

## Удаление профиля

### iPhone/iPad
1. Настройки > Основные > VPN и управление устройством
2. Профили > Baltic DNS - Secure DNS Configuration
3. Удалить профиль

### Mac  
1. Системные настройки > Профили
2. Выберите "Baltic DNS - Secure DNS Configuration"
3. Нажмите кнопку "-" для удаления

## Troubleshooting

### DNS не работает
1. Проверьте подключение к интернету
2. Перезагрузите устройство
3. Переустановите профиль
4. Проверьте что профиль активен в настройках

### Медленный интернет
1. Попробуйте отключить профиль временно
2. Проверьте скорость с другими DNS серверами
3. Убедитесь что серверы Baltic DNS доступны

### Проблемы с определенными сайтами
1. Очистите кеш DNS: перезагрузите устройство
2. Проверьте доступность сайта через веб-прокси
3. Обратитесь к администратору Baltic DNS

## Поддержка

- **Веб-админка**: https://dns.uzicus.ru/
- **IP адрес сервера**: 185.237.95.211
- **Проверка статуса**: https://dns.uzicus.ru/api/status

## Технические детали

### Совместимость
- iOS 14.0+
- iPadOS 14.0+
- macOS 10.15+

### Особенности
- Автоматическое переключение между протоколами
- Поддержка IPv4 и IPv6
- Защита от DNS-атак
- Минимальное логирование для приватности

### Безопасность  
- TLS 1.2+ для зашифрованных соединений
- Валидация сертификатов
- Защита от DNS spoofing
- Отсутствие логирования запросов